---
// Recreación de src/components/organismo/NotasMedicas.astro
import H2 from "@/components/atomos/H2.astro";
import DivBox1 from "@/components/atomos/DivBox1.astro";
// Asumo que el formulario para agregar notas podría estar aquí
// import FormularioNotasMedicas from './FormularioNotasMedicas.astro';

interface Note {
    id: number | string;
    autor: string; // O podría ser un objeto de usuario
    fecha: string;
    nota: string;
}

interface Props {
    notes: Note[];
    userId?: string;
}

const { notes = [], userId } = Astro.props;
---

<DivBox1>
    <H2 style="text-xl font-semibold text-gray-700 mb-3">Notas Médicas</H2>

    <div class="space-y-4">
        {notes.length > 0 ? (
            notes.map(nota => (
                <div class="p-3 bg-gray-50 border rounded-md">
                    <div class="flex justify-between items-center mb-1">
                        <p class="font-semibold text-sm text-cyan-800">{nota.autor || 'Autor desconocido'}</p>
                        <p class="text-xs text-gray-500">{nota.fecha ? new Date(nota.fecha).toLocaleDateString() : 'Fecha desconocida'}</p>
                    </div>
                    <p class="text-sm text-gray-800 whitespace-pre-wrap">{nota.nota}</p>
                </div>
            ))
        ) : (
            <p class="text-sm text-gray-500">No hay notas registradas para este paciente.</p>
        )}
    </div>

    <!-- 
        Placeholder: Aquí podrías tener un botón o un formulario para agregar nuevas notas.
        Por ejemplo, podrías descomentar lo siguiente:
    -->
    <!-- 
    <div class="mt-4">
        <FormularioNotasMedicas userId={userId} />
    </div>
    -->
</DivBox1>
